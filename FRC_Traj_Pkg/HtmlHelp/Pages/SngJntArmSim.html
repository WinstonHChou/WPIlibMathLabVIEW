<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<!-- Constructed with LabVIEW Report Generation -->
<HEAD>
<TITLE></TITLE>
</HEAD>

<BODY>
<h2 id="SngJntArmSim" >SngJntArmSim</h2>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_EstimateMOI" >SngJntArmSim_EstimateMOI</h3>
<p><IMG SRC="SngJntArmSim_EstimateMOI_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Calculates a rough estimate of the moment of inertia of an arm given its length and mass.<BR>
 <BR>
Inputs:<BR>
   - lengthMeters  --  The length of the arm.<BR>
   - massKg  --  The mass of the arm.<BR>
<BR>
Outputs:<BR>
   - MOI  --  The calculated moment of inertia.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_Execute" >SngJntArmSim_Execute</h3>
<p><IMG SRC="SngJntArmSim_Execute_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Single call LabVIEW function to simulate a Single Jointed Arm system.   <BR>
<BR>
The single jointed arm linear system definition is:<BR>
  - States<BR>
      -  angle position (Rad)<BR>
      -  velocity (Rad/Sec)<BR>
  - Inputs:<BR>
      -  motor voltage<BR>
  -  Outputs:<BR>
      -  angle position (rad)<BR>
<BR>
<BR>
Inputs:<BR>
  -  SngJntArm Model Params  --  cluster  --  Contains physical configuration for Single Jointed Arm system.<BR>
  -  SngJntArm Sim Simulation Params  --  cluster  --  Contains siulation configuration.<BR>
  -  Motor Dmd (CO)  --  double  -- motor demand value (+/- 1.0 )<BR>
  -  Battery Voltage  --  double  -- Current simulated battery voltage (Volts)<BR>
  -  dT Sec  -- double  --  Update period (Seconds, Default: 0.02)<BR>
<BR>
Outputs:<BR>
  -  ArmAngle Rad  --  double  --  Current angle of the arm (Radians)<BR>
  -  At High Limit  -- boolean  -- High limit of travel has been reached<BR>
  -  At Low Limit  -- boolean  -- Low limit of travel has been reached.<BR>
  -  Error  -- boolean  --  If TRUE an error occured.<BR>
  -  Motor Current  -- double  -- Current motor current (Amps)<BR>
   - outSngJntArmSim  --  cluster  --  Current internal data cluster.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_GetAngleRads" >SngJntArmSim_GetAngleRads</h3>
<p><IMG SRC="SngJntArmSim_GetAngleRads_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Returns the current arm angle.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  updated system data cluster<BR>
<BR>
Outputs:<BR>
   - ArmAngle-Radians  --  The current arm angle (Radians).<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_GetCurrentDraw" >SngJntArmSim_GetCurrentDraw</h3>
<p><IMG SRC="SngJntArmSim_GetCurrentDraw_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Returns the arm current draw.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  updated system data cluster<BR>
<BR>
Outputs:<BR>
   - Current_Amps  --  The aram current draw.  (Amps)<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_GetVelocityRadsPerSec" >SngJntArmSim_GetVelocityRadsPerSec</h3>
<p><IMG SRC="SngJntArmSim_GetVelocityRadsPerSec_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Returns the current arm velocity.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  updated system data cluster<BR>
<BR>
Outputs:<BR>
   - Velocity_RadPerSec  --  The current arm velocity (Radians/Sec).<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_HasHitLowerLimit" >SngJntArmSim_HasHitLowerLimit</h3>
<p><IMG SRC="SngJntArmSim_HasHitLowerLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns whether the arm has hit the lower limit.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  system data cluster<BR>
<BR>
Outputs:<BR>
   - AtLowLimit  --  Whether the arm has hit the lower limit.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_HasHitUpperLimit" >SngJntArmSim_HasHitUpperLimit</h3>
<p><IMG SRC="SngJntArmSim_HasHitUpperLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Returns whether the arm has hit the upper limit.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  updated system data cluster<BR>
<BR>
Outputs:<BR>
   - AtHighLimit  --  Whether the arm has hit the upper limit.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_New" >SngJntArmSim_New</h3>
<p><IMG SRC="SngJntArmSim_New_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Creates a simulated arm mechanism.<BR>
 <BR>
Inputs:<BR>
   - maxAngleRads  --  The maximum angle that the arm is capable of.<BR>
   - minAngleRads  --  The minimum angle that the arm is capable of.<BR>
   - gearbox  --  The type of and number of motors in the arm gearbox.<BR>
   - gearing  --  The gearing of the arm (numbers greater than 1 represent reductions).<BR>
   - armMassKg  --  The mass of the arm.<BR>
   - measurementStdDevs  --  The standard deviations of the measurements.<BR>
   - armLengthMeters  --  The length of the arm.<BR>
   - jKgMetersSquared  --  The moment of inertia of the arm; can be calculated from CAD software.<BR>
   - simulateGravity  --  Whether gravity should be simulated or not.<BR>
<BR>
Outputs:<BR>
   - SingleJointArmSim  --  system data cluster\<BR>
   - error  --  If TRUE, an error occured.<BR>
<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_Pack_Simulation_Params" >SngJntArmSim_Pack_Simulation_Params</h3>
<p><IMG SRC="SngJntArmSim_Pack_Simulation_Params_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Pack simulation parameters used by the Single Jointed Arm Simulation Execute routine.<BR>
<BR>
Inputs:<BR>
  -  Min Angle  --  double  --  Minimum physical arm angle (radians)<BR>
  -  Max Angle  --  double  --  Maximum physical arm angle (radians)<BR>
  -  Pos Sim Std Dev  --  double  -- Standard deviation for the arm position (radians  Default: 0.09)<BR>
  - SimulateGravity  --  boolean  -- Simulate gravity (Default: True)<BR>
<BR>
Outputs:<BR>
  -  SngJntArm Sim Simulation  -- cluster  -- Packed data for Execute function<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_Rkf45_Func" >SngJntArmSim_Rkf45_Func</h3>
<p><IMG SRC="SngJntArmSim_Rkf45_Func_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Custom function to calculate the newX used for integrating to get updated HatX <BR>
<BR>
<BR>
Inputs:<BR>
   - Variant  --  extra data used by function<BR>
                          for this function, the extra data is;  Matrix A, Matrix B, Arm length, Simulator gravity flag.<BR>
   - X   -  X matrix<BR>
   - U   - U matrix<BR>
<BR>
Outputs:<BR>
   - NewX  --  X value as a function of (X, U, extra data)<BR>
   - error  --  If TRUE, an error occured.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_SetInputVoltage" >SngJntArmSim_SetInputVoltage</h3>
<p><IMG SRC="SngJntArmSim_SetInputVoltage_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Sets the input voltage for the arm.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  system data cluster<BR>
   - volts  --  The input voltage.<BR>
   - Battery_Volts  --  current battery voltage<BR>
<BR>
Outputs:<BR>
   - SingleJointArmSim  --  updated system data cluster<BR>
<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_SetState" >SngJntArmSim_SetState</h3>
<p><IMG SRC="SngJntArmSim_SetState_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Sets the system state.<BR>
  <BR>
Inputs:<BR>
   - SngJntArmSim  --  Data cluster<BR>
   - state  --  The new state.<BR>
<BR>
Outputs:<BR>
   - OutSngJntArmSim  --  Updated data cluster<BR>
   - SizeCoerced  --  If TRUE, an error occured.  Execution may continue.</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_Update" >SngJntArmSim_Update</h3>
<p><IMG SRC="SngJntArmSim_Update_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Updates the simulation.<BR>
  <BR>
Inputs:<BR>
   - SngJntArmSim  --  Data cluster<BR>
   - dtSeconds  --  The time between updates.<BR>
<BR>
Outputs:<BR>
   - OutSngJntArmSim  --  Updated data cluster<BR>
   - Error  --  If TRUE, an error occured.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_UpdateX" >SngJntArmSim_UpdateX</h3>
<p><IMG SRC="SngJntArmSim_UpdateX_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Updates the state of the arm.<BR>
 <BR>
Inputs:<BR>
   - currentXhat  --  The current state estimate.<BR>
   - u  --  The system inputs (voltage).<BR>
   - dtSeconds  --  The time difference between controller updates.<BR>
<BR>
Outputs:<BR>
   - updated_Xhat  --  Updated current state estimate<BR>
   - error  --  If TRUE, an error occured.<BR>
<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_WouldHitLowerLimit" >SngJntArmSim_WouldHitLowerLimit</h3>
<p><IMG SRC="SngJntArmSim_WouldHitLowerLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;"> Returns whether the arm would hit the lower limit.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  updated system data cluster<BR>
   - currentAngleRads  --  The current arm height.<BR>
<BR>
Outputs:<BR>
   - WouldHitLowLimit  --  Whether the arm would hit the lower limit.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="SngJntArmSim_WouldHitUpperLimit" >SngJntArmSim_WouldHitUpperLimit</h3>
<p><IMG SRC="SngJntArmSim_WouldHitUpperLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns whether the arm has hit the upper limit.<BR>
 <BR>
Inputs:<BR>
   - SingleJointArmSim  --  updated system data cluster<BR>
   - currentAngleRads  --  The current arm height.<BR>
<BR>
Outputs:<BR>
   - WouldHitHighLimit  --  Whether the arm would hit the upper limit.<BR>
</pre></p>
<br>
</BODY>
</HTML>