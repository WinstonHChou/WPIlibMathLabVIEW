<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<!-- Constructed with LabVIEW Report Generation -->
<HEAD>
<TITLE></TITLE>
</HEAD>

<BODY>
<h2 id="ElevatorSim" >ElevatorSim</h2>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_Execute" >ElevatorSim_Execute</h3>
<p><IMG SRC="ElevatorSim_Execute_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Single call LabVIEW function to simulate an Elevatorr system.   <BR>
<BR>
The Elevator linear system definition is:<BR>
  - States<BR>
      -  position (meters)<BR>
      -  velocity (meters/sec)<BR>
  - Inputs:<BR>
      -  motor voltage (volts)<BR>
  -  Outputs:<BR>
      -  position (meters)<BR>
<BR>
<BR>
Inputs:<BR>
  -  LinearSystem Elevator Model Params  --  cluster  --  Contains physical configuration for Elevator system.<BR>
  -  Elevator Sim Simulation Params  --  cluster  --  Contains siulation configuration.<BR>
  -  Motor Dmd (CO)  --  double  -- motor demand value (+/- 1.0 )<BR>
  -  Battery Voltage  --  double  -- Current simulated battery voltage (Volts)<BR>
  -  dT Sec  -- double  --  Update period (Seconds, Default: 0.02)<BR>
<BR>
Outputs:<BR>
  -  ElevatorHeight  --  double  --  Current elevator height (meters)<BR>
  -  At High Limit  -- boolean  -- Elevator has reached high height limit<BR>
  -  At Low Limit  -- boolean  -- Elevator has reached low height limit<BR>
  -  Error  -- boolean  --  If TRUE an error occured.<BR>
  -  Motor Current  -- double  -- Current motor current (Amps)<BR>
   - outElevatorSim  --  cluster  --  Current internal data cluster.<BR>
<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_GetCurrentDraw" >ElevatorSim_GetCurrentDraw</h3>
<p><IMG SRC="ElevatorSim_GetCurrentDraw_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns the elevator current draw.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
<BR>
Outputs:<BR>
   - Current_Amps  --   The elevator current draw. (Amps)<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_GetPositionMeters" >ElevatorSim_GetPositionMeters</h3>
<p><IMG SRC="ElevatorSim_GetPositionMeters_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns the position of the elevator.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
<BR>
Outputs:<BR>
   - Position_Meters  --   The position of the elevator. (Meters)<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_GetVelocityMetersPerSecond" >ElevatorSim_GetVelocityMetersPerSecond</h3>
<p><IMG SRC="ElevatorSim_GetVelocityMetersPerSecond_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns the velocity of the elevator.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
<BR>
Outputs:<BR>
   - Velocity_MetersPerSec  --   The velocity of the elevator.  (M/S)<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_HasHitLowerLimit" >ElevatorSim_HasHitLowerLimit</h3>
<p><IMG SRC="ElevatorSim_HasHitLowerLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns whether the elevator has hit the lower limit.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
<BR>
Outputs:<BR>
   - AtLowLimit  --   Whether the elevator has hit the lower limit.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_HasHitUpperLimit" >ElevatorSim_HasHitUpperLimit</h3>
<p><IMG SRC="ElevatorSim_HasHitUpperLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns whether the elevator has hit the upper limit.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
<BR>
Outputs:<BR>
   - AtHighLimit  --   Whether the elevator has hit the upper limit.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_New" >ElevatorSim_New</h3>
<p><IMG SRC="ElevatorSim_New_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Creates a simulated elevator mechanism.<BR>
 <BR>
Inputs:<BR>
   - maxHeightMeters  --  The max allowable height of the elevator.<BR>
   - minHeightMeters  --  The min allowable height of the elevator.<BR>
   - gearbox  --  The type of and number of motors in the elevator gearbox.<BR>
   - gearing  --  The gearing of the elevator (numbers greater than 1 represent reductions).<BR>
   - carriageMassKg  --  The mass of the elevator carriage.<BR>
   - MeasurementStdDev  --  Vector matrix of std deviations for measurements.<BR>
   - drumRadiusMeters  --  The radius of the drum that the elevator spool is wrapped around.<BR>
   - SimulateGravity  --  Simulate gravity (optional)  Default: True<BR>
<BR>
Outputs:<BR>
   - OutElevatorSim  --  Updated data cluster<BR>
   - Error  --  If TRUE, an error occured.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_Pack_Simulation_Params" >ElevatorSim_Pack_Simulation_Params</h3>
<p><IMG SRC="ElevatorSim_Pack_Simulation_Params_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Pack simulation parameters used by the Elevator Simulation Execute routine.<BR>
<BR>
Inputs:<BR>
  -  Min Height  --  double  --  Minimum physical elevator height (meters)<BR>
  -  Max Height  --  double  --  Maximum physical elevator height (meters)<BR>
  -  Pos Sim Std Dev  --  double  -- Standard deviation for the motor position (meters  Default: 0.09)<BR>
  - SimulateGravity  --  boolean  -- Simulate gravity (Default: True)<BR>
<BR>
Outputs:<BR>
  -  Elevator Sim Simulation  -- cluster  -- Packed data for Execute function<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_Rkf45_Func" >ElevatorSim_Rkf45_Func</h3>
<p><IMG SRC="ElevatorSim_Rkf45_Func_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Callback function to pass as a strict reference to numerical integration routine to calculate F( X, U, extra ) <BR>
This is an internal function.<BR>
<BR>
The calculation performed is:<BR>
     NewX = A x X + B x U + K<BR>
<BR>
Inputs:<BR>
   - Variant  --  Extra data to pass to the function.  The format of the data is specific to this routine.  In this case the data contains:<BR>
              -  Current A matrix<BR>
              -  Current B matrix<BR>
              -  K matrix<BR>
   - X  --  X matrix<BR>
   - U  -- U matrix<BR>
<BR>
Output:<BR>
   - NewX  -- Calculated new value of X<BR>
   - Error  --  If TRUE, an error occured.</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_SetInputVoltage" >ElevatorSim_SetInputVoltage</h3>
<p><IMG SRC="ElevatorSim_SetInputVoltage_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Sets the input voltage for the elevator.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
   - volts  --  The input voltage. (volts)<BR>
   - BatteryVoltage  --  The current battery voltage (volts)<BR>
<BR>
Outputs:<BR>
   - OutElevatorSim  --  Updated data cluster<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_SetState" >ElevatorSim_SetState</h3>
<p><IMG SRC="ElevatorSim_SetState_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Sets the system state.<BR>
  <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
   - state  --  The new state.<BR>
<BR>
Outputs:<BR>
   - OutElevatorSim  --  Updated data cluster<BR>
   - SizeCoerced  --  If TRUE, an error occured.  Execution may continue.</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_Update" >ElevatorSim_Update</h3>
<p><IMG SRC="ElevatorSim_Update_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Updates the simulation.<BR>
  <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
   - dtSeconds  --  The time between updates.<BR>
<BR>
Outputs:<BR>
   - OutElevatorSim  --  Updated data cluster<BR>
   - Error  --  If TRUE, an error occured.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_UpdateX" >ElevatorSim_UpdateX</h3>
<p><IMG SRC="ElevatorSim_UpdateX_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Updates the state of the elevator.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
   - currentXhat  --  The current state estimate.<BR>
   - u  --  The system inputs (voltage).<BR>
   - dtSeconds   --  he time difference between controller updates.<BR>
<BR>
Outputs:<BR>
   - OutElevatorSim  --  Updated data cluster<BR>
   - Error  --  If TRUE, an error occured.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_WouldHitLowerLimit" >ElevatorSim_WouldHitLowerLimit</h3>
<p><IMG SRC="ElevatorSim_WouldHitLowerLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns whether the elevator would hit the lower limit.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
   - elevatorHeightMeters  --  The elevator height.<BR>
<BR>
Outputs:<BR>
   - WouldHitLowLimit  --   Whether the elevator would hit the lower limit.<BR>
</pre></p>
<br>
<HR SIZE="6" WIDTH=" 100.000000%" COLOR="GREY">
<h3 id="ElevatorSim_WouldHitUpperLimit" >ElevatorSim_WouldHitUpperLimit</h3>
<p><IMG SRC="ElevatorSim_WouldHitUpperLimit_iconc.png"  ALIGN=BOTTOM></p>
<p><pre style="overflow-x: auto; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; font-family: serif; font-size: 12pt;">Returns whether the elevator would hit the upper limit.<BR>
 <BR>
Inputs:<BR>
   - ElevatorSim  --  Data cluster<BR>
   - elevatorHeightMeters  --  The elevator height.<BR>
<BR>
Outputs:<BR>
   - OutElevatorSim  --  Updated data cluster<BR>
   - WouldHitUpperLimit  --   Whether the elevator would hit the upper limit.<BR>
</pre></p>
<br>
</BODY>
</HTML>